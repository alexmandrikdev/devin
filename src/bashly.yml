name: devin
help: Development tools
version: 0.1.0

commands:
  - name: completions
    help: |-
      Generate bash completions
      Usage: eval "\$(devin completions)"

  - name: pr-ai
    help: Create a PR with AI

    flags:
      - long: --base
        short: -b
        arg: base
        default: main
        help: Base branch
        completions:
          - $(git branch --format='%(refname:short)' 2>/dev/null)

    examples:
      - devin pr-ai
      - devin pr-ai --base master

    environment_variables:
      - name: N8N_WEBHOOK_URL
        default: http://localhost:5678/webhook/auto-pr-title-and-description
        help: URL of the webhook

    dependencies:
      - jq
      - gh
      - curl
      - base64
      - git
      - glow

  - name: commit-ai
    help: Create a commit with AI

    args:
      - name: description
        help: Optional description for the changes

    examples:
      - devin commit-ai
      - devin commit-ai "Fix bug"

    environment_variables:
      - name: N8N_WEBHOOK_URL
        default: http://localhost:5678/webhook/auto-commit
        help: URL of the webhook

    dependencies:
      - git
      - jq
      - curl

  - name: branch-ai
    help: Create branches with AI

    flags:
      - long: --base
        short: -b
        arg: base
        default: main
        help: Base branch
        completions:
          - $(git branch --format='%(refname:short)' 2>/dev/null)

    examples:
      - devin branch-ai
      - devin branch-ai --base master

    environment_variables:
      - name: N8N_WEBHOOK_URL
        default: http://localhost:5678/webhook/auto-branch
        help: URL of the webhook

    dependencies:
      - git
      - jq
      - curl

  - name: wip-branch-create
    help: Create a work in progress branch

    flags:
      - long: --base
        short: -b
        arg: base
        default: main
        help: Base branch
        completions:
          - $(git branch --format='%(refname:short)' 2>/dev/null)

    examples:
      - devin wip-branch-create
      - devin wip-branch-create --base master

  - name: rebase-updated
    help: Rebase current branch onto updated base branch

    flags:
      - long: --base
        short: -b
        arg: base
        default: main
        help: Base branch
        completions:
          - $(git branch --format='%(refname:short)' 2>/dev/null)

    examples:
      - devin rebase-updated
      - devin rebase-updated --base master
